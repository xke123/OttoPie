### OttoPie - è‡ªåŠ¨åŒ– Python ä»»åŠ¡ç®¡ç†å¹³å° ğŸ™ğŸ¥§

![OttoPie Logo](image.webp)


**OttoPie** æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ Python è‡ªåŠ¨åŒ–ä»»åŠ¡ç®¡ç†å·¥å…·ã€‚å®ƒçš„åå­—æ¥æºäº "Otto"ï¼ˆå…«çˆªé±¼ ğŸ™ï¼Œè°éŸ³Auto ï¼Œä»£è¡¨å¤šä»»åŠ¡ä¸è‡ªåŠ¨åŒ–ï¼‰å’Œ "Pie"ï¼ˆè°éŸ³æ´¾ï¼ŒPython ğŸ¥§ï¼Œä»£è¡¨ Python ç”Ÿæ€ï¼‰ã€‚OttoPie è®©ä½ åƒå…«çˆªé±¼ä¸€æ ·çµæ´»ç®¡ç†å¤šä¸ª Python è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œå¹¶æä¾›å›¾å½¢åŒ–ç•Œé¢ã€å®šæ—¶è°ƒåº¦ã€è„šæœ¬ç®¡ç†å’Œæ—¥å¿—è®°å½•ç­‰åŠŸèƒ½ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- **ğŸ“‹ è„šæœ¬ç®¡ç†**ï¼šæ”¯æŒåŠ è½½ã€åˆ é™¤ã€é…ç½® Python è„šæœ¬ï¼Œè®©ä»»åŠ¡ç®¡ç†æ›´ç›´è§‚ã€‚
- **â³ ä»»åŠ¡è°ƒåº¦**ï¼šæ”¯æŒå®šæ—¶æ‰§è¡Œ Python è„šæœ¬ï¼Œè‡ªåŠ¨åŒ–å¤„ç†æ—¥å¸¸ä»»åŠ¡ã€‚
- **ğŸ“‚ æ–‡ä»¶ç›‘æ§**ï¼šå¯ç»“åˆæ’ä»¶è„šæœ¬ï¼Œå®ç°å¯¹æ–‡ä»¶å¤¹å˜åŒ–çš„å®æ—¶ç›‘æ§ã€‚
- **ğŸ–¥ï¸ å›¾å½¢ç•Œé¢**ï¼šåŸºäº PyQt æ„å»ºï¼Œæ— éœ€å‘½ä»¤è¡Œå³å¯æ“ä½œã€‚
- **ğŸ’¾ ä»»åŠ¡æ—¥å¿—**ï¼šé›†ä¸­è®°å½•è„šæœ¬è¿è¡Œæ—¥å¿—ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ‰§è¡ŒçŠ¶æ€ã€‚
- **ğŸ›ï¸ æ’ä»¶å¼æ¶æ„**ï¼šæ”¯æŒè‡ªå®šä¹‰ Python æ’ä»¶ï¼Œåªéœ€å®ç°ç®€å•çš„æ¥å£ï¼Œå³å¯è½»æ¾æ‰©å±•åŠŸèƒ½ã€‚

---

## ğŸš€ å®‰è£…ä¸è¿è¡Œ

### 1ï¸âƒ£ å®‰è£…ä¾èµ–

OttoPie åŸºäº Python 3 è¿è¡Œï¼Œè¯·ç¡®ä¿å·²å®‰è£… Python 3.xï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ï¼š

```sh
pip install pyqt5
```

> å¦‚æœä½¿ç”¨ PySide2ï¼Œè¯·æ›¿æ¢ä¸º `pip install pyside2`ã€‚

### 2ï¸âƒ£ è¿è¡Œ OttoPie

åœ¨ç»ˆç«¯æˆ–å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š

```sh
python main.py
```

---

## ğŸ—ï¸ ä½¿ç”¨æŒ‡å—

### 1ï¸âƒ£ æ·»åŠ ä»»åŠ¡

1. æ‰“å¼€ OttoPieï¼Œè¿›å…¥â€œè„šæœ¬ç®¡ç†â€é¡µé¢ã€‚
2. ç‚¹å‡» **â€œæ·»åŠ ä»»åŠ¡â€** æŒ‰é’®ï¼Œå¼¹å‡ºè„šæœ¬é…ç½®çª—å£ï¼š
   - é€‰æ‹© Python ä»»åŠ¡è„šæœ¬ï¼ˆ`.py` æ–‡ä»¶ï¼‰ã€‚
   - é€‰æ‹© **æºæ–‡ä»¶å¤¹** å’Œ **ç›®æ ‡æ–‡ä»¶å¤¹**ï¼ˆå¦‚æœä»»åŠ¡éœ€è¦ï¼‰ã€‚
   - è®¾ç½® **æ‰§è¡Œé—´éš”**ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚
3. ç‚¹å‡» **ç¡®å®š**ï¼Œä»»åŠ¡ä¼šæ·»åŠ åˆ°ä»»åŠ¡åˆ—è¡¨ä¸­ã€‚

### 2ï¸âƒ£ å¯åŠ¨ / åœæ­¢ä»»åŠ¡

- åœ¨â€œè„šæœ¬ç®¡ç†â€é¡µé¢ï¼Œç‚¹å‡» **â€œå¯åŠ¨â€** æŒ‰é’®ï¼Œä»»åŠ¡å°†æŒ‰ç…§è®¾å®šçš„é—´éš”æ‰§è¡Œã€‚
- ç‚¹å‡» **â€œåœæ­¢â€** æŒ‰é’®ï¼Œå¯æš‚åœä»»åŠ¡æ‰§è¡Œã€‚

### 3ï¸âƒ£ ç¼–è¾‘ä»»åŠ¡é…ç½®

- ç‚¹å‡» **â€œç¼–è¾‘é…ç½®â€** æŒ‰é’®ï¼Œå¯é‡æ–°é…ç½®è„šæœ¬å‚æ•°ã€‚
- **ç¼–è¾‘æ—¶ä»»åŠ¡ä¼šè‡ªåŠ¨åœæ­¢**ï¼Œä¿®æ”¹å®Œæˆåå¯é‡æ–°å¯åŠ¨ä»»åŠ¡ã€‚

### 4ï¸âƒ£ åˆ é™¤ä»»åŠ¡

- ç‚¹å‡» **â€œåˆ é™¤â€** æŒ‰é’®ï¼Œå¯ç§»é™¤ä»»åŠ¡ï¼ˆä¸ä¼šåˆ é™¤è„šæœ¬æ–‡ä»¶ï¼‰ã€‚

### 5ï¸âƒ£ æŸ¥çœ‹æ—¥å¿—

- åˆ‡æ¢åˆ° **â€œä»»åŠ¡æ—¥å¿—â€** é€‰é¡¹å¡ï¼ŒæŸ¥çœ‹ä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€å’Œå†å²è®°å½•ã€‚

---

## ğŸ”Œ å¼€å‘è‡ªå®šä¹‰æ’ä»¶ï¼ˆPython ä»»åŠ¡è„šæœ¬ï¼‰

OttoPie é‡‡ç”¨ **æ’ä»¶åŒ–æ¶æ„**ï¼Œæ¯ä¸ª Python ä»»åŠ¡è„šæœ¬éœ€è¦å®ç° `run(params)` æ¥å£ï¼ŒOttoPie ä¼šå®šæœŸè°ƒç”¨ `run()` è¿è¡Œä»»åŠ¡ã€‚

### ğŸ“œ æ’ä»¶ç¤ºä¾‹ï¼šsimpletask.py

åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç¤ºä¾‹è„šæœ¬ **simpletask.py**ï¼Œç”¨äºå±•ç¤ºå¦‚ä½•å®ç°æ’ä»¶æ¥å£ã€‚è¯¥ç¤ºä¾‹è„šæœ¬å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

- **æ–‡ä»¶ç›‘æ§ä¸æ‹·è´**ï¼š  
  è„šæœ¬ä¼šç›‘è§†æŒ‡å®šçš„æºæ–‡ä»¶å¤¹ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„å›¾ç‰‡æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹ä¸­ã€‚  
- **ç›®å½•ç»“æ„ä¿ç•™**ï¼š  
  åœ¨æ‹·è´è¿‡ç¨‹ä¸­ï¼Œä¿ç•™æºæ–‡ä»¶å¤¹ä¸­çš„å­ç›®å½•ç»“æ„ï¼Œä½¿ç›®æ ‡æ–‡ä»¶å¤¹æˆä¸ºæºæ–‡ä»¶å¤¹çš„é•œåƒã€‚  
- **åŒæ­¥æ“ä½œ**ï¼š  
  å½“æºæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å‘ç”Ÿæ›´æ–°æˆ–åˆ é™¤æ—¶ï¼Œç›®æ ‡æ–‡ä»¶å¤¹ä¹Ÿä¼šéšä¹‹æ›´æ–°æˆ–åˆ é™¤ï¼Œå®ç°ä¸¤è€…çš„å®Œå…¨åŒæ­¥ã€‚

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```python
import os
import shutil

def sync_folders(src, tgt, counters):
    """
    é€’å½’åŒæ­¥ src ä¸ tgt æ–‡ä»¶å¤¹ï¼Œä½¿ tgt æˆä¸º src çš„å®Œæ•´é•œåƒã€‚
    
    å‚æ•°ï¼š
      - src: æºæ–‡ä»¶å¤¹è·¯å¾„
      - tgt: ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„
      - counters: ç”¨äºç»Ÿè®¡æ“ä½œæ¬¡æ•°çš„å­—å…¸ï¼ŒåŒ…å« 'copied', 'updated', 'deleted', 'skipped'
    """
    # ç¡®ä¿ç›®æ ‡æ–‡ä»¶å¤¹å­˜åœ¨
    if not os.path.exists(tgt):
        os.makedirs(tgt)
    
    # 1. éå†æºæ–‡ä»¶å¤¹ï¼Œå¤„ç†æ–°å¢å’Œæ›´æ–°
    for entry in os.listdir(src):
        src_entry = os.path.join(src, entry)
        tgt_entry = os.path.join(tgt, entry)
        if os.path.isdir(src_entry):
            # é€’å½’åŒæ­¥å­æ–‡ä»¶å¤¹
            sync_folders(src_entry, tgt_entry, counters)
        else:
            # å¦‚æœç›®æ ‡ä¸­ä¸å­˜åœ¨è¯¥æ–‡ä»¶ï¼Œåˆ™æ‹·è´
            if not os.path.exists(tgt_entry):
                shutil.copy2(src_entry, tgt_entry)
                counters["copied"] += 1
            else:
                # å¦‚æœç›®æ ‡ä¸­å­˜åœ¨ï¼Œä½†æºæ–‡ä»¶æ›´æ–°ï¼Œåˆ™è¦†ç›–
                if os.path.getmtime(src_entry) > os.path.getmtime(tgt_entry):
                    shutil.copy2(src_entry, tgt_entry)
                    counters["updated"] += 1
                else:
                    counters["skipped"] += 1

    # 2. éå†ç›®æ ‡æ–‡ä»¶å¤¹ï¼Œåˆ é™¤é‚£äº›åœ¨æºæ–‡ä»¶å¤¹ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•
    for entry in os.listdir(tgt):
        tgt_entry = os.path.join(tgt, entry)
        src_entry = os.path.join(src, entry)
        if not os.path.exists(src_entry):
            # å¦‚æœç›®æ ‡ä¸­çš„è¯¥æ¡ç›®åœ¨æºä¸­ä¸å­˜åœ¨ï¼Œåˆ™åˆ é™¤
            if os.path.isdir(tgt_entry):
                shutil.rmtree(tgt_entry)
            else:
                os.remove(tgt_entry)
            counters["deleted"] += 1

def run(params):
    """
    åŒæ­¥ä»»åŠ¡æ¥å£ï¼Œå¿…é¡»å®ç° run(params) æ¥å£ã€‚
    
    å‚æ•° params ä¸ºå­—å…¸ï¼Œå¿…é¡»åŒ…å«ï¼š
      - "src": æºæ–‡ä»¶å¤¹è·¯å¾„
      - "tgt": ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„
      
    è¿”å›å­—ç¬¦ä¸²ï¼Œæè¿°æ“ä½œç»“æœã€‚
    """
    src = params.get("src", "").strip()
    tgt = params.get("tgt", "").strip()
    
    if not src or not tgt:
        return "é”™è¯¯ï¼šè¯·æŒ‡å®šæºæ–‡ä»¶å¤¹å’Œç›®æ ‡æ–‡ä»¶å¤¹ã€‚"
    if not os.path.isdir(src):
        return "é”™è¯¯ï¼šæºæ–‡ä»¶å¤¹ä¸å­˜åœ¨ã€‚"
    
    counters = {"copied": 0, "updated": 0, "deleted": 0, "skipped": 0}
    
    try:
        sync_folders(src, tgt, counters)
        return ("åŒæ­¥å®Œæˆï¼šå¤åˆ¶æ–‡ä»¶ {copied} ä¸ªï¼Œæ›´æ–°æ–‡ä»¶ {updated} ä¸ªï¼Œåˆ é™¤æ–‡ä»¶ {deleted} ä¸ªï¼Œè·³è¿‡ {skipped} ä¸ªæ–‡ä»¶ã€‚"
                .format(**counters))
    except Exception as e:
        return "åŒæ­¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: " + str(e)
```

#### ğŸ“Œ æ’ä»¶è§„èŒƒ

- **å¿…é¡»å®ç° `run(params)` å‡½æ•°**ã€‚  
- `params` å‚æ•°æ˜¯ä¸€ä¸ª Python å­—å…¸ï¼ŒåŒ…å«ä»»åŠ¡é…ç½®ï¼Œå¦‚ `src`ï¼ˆæºæ–‡ä»¶å¤¹ï¼‰å’Œ `tgt`ï¼ˆç›®æ ‡æ–‡ä»¶å¤¹ï¼‰ã€‚  
- **è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²**ï¼Œç”¨äºæ—¥å¿—è®°å½•ã€‚  
- ç¤ºä¾‹è„šæœ¬ **simpletask.py** å±•ç¤ºäº†å¦‚ä½•å®ç°æ–‡ä»¶çš„æ–°å¢ã€æ›´æ–°å’Œåˆ é™¤åŒæ­¥ï¼Œç¡®ä¿ç›®æ ‡æ–‡ä»¶å¤¹å§‹ç»ˆä¸æºæ–‡ä»¶å¤¹ä¿æŒä¸€è‡´ã€‚

---

OttoPie ä»åœ¨æŒç»­å¼€å‘ä¸­ï¼Œæ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼  
å¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥ Fork æœ¬é¡¹ç›®å¹¶æäº¤ Pull Request ğŸš€ã€‚

---

## ğŸ“œ è®¸å¯è¯

OttoPie éµå¾ª MIT è®¸å¯è¯ï¼Œä½ å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬è½¯ä»¶ã€‚

---

OttoPieï¼Œè®©ä½ çš„ Python ä»»åŠ¡è‡ªåŠ¨åŒ–ç®¡ç†å˜å¾—æ›´ç®€å•ï¼ğŸ™ğŸ¥§

---

ä»¥ä¸Šå³ä¸º OttoPie çš„ä½¿ç”¨è¯´æ˜ä¸ç¤ºä¾‹è„šæœ¬ä»‹ç»ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹å¹¶å¼€å‘æ›´å¤šè‡ªå®šä¹‰æ’ä»¶ã€‚